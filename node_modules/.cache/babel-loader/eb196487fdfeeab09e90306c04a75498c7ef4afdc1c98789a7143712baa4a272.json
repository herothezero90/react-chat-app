{"ast":null,"code":"var _jsxFileName = \"/Users/mymac/Desktop/Zavrsni_rad_Karla_Lenard/react_chat_app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Messages from \"./components/Messages\";\nimport Input from \"./components/Input\";\nimport Navigation from \"./components/Navigation\";\nimport Footer from \"./components/Footer\";\nimport PopUp from \"./components/PopUp\";\nimport ActiveUsers from \"./components/Users/ActiveUsers\";\nimport randomName from \"./components/Users/RandomName\";\nimport randomAvatar from \"./components/Users/RandomAvatar\";\nimport Container from \"react-bootstrap/Container\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const initialState = {\n    messageList: [],\n    // Renamed 'messages' to 'messageList'\n    currentUser: {\n      // Renamed 'member' to 'currentUser'\n      username: randomName(),\n      avatar: randomAvatar()\n    },\n    activeUsers: [] // No changes needed\n  };\n\n  const [state, setState] = useState(initialState);\n  const [drone, setDrone] = useState(null);\n  const [uniqueActiveUsers, setUniqueActiveUsers] = useState(new Set());\n  const updateActiveUsers = members => {\n    const activeUsers = members.map(member => ({\n      username: member.clientData.username,\n      avatar: member.clientData.avatar\n    }));\n    const uniqueUsersSet = new Set(activeUsers.map(user => user.username));\n    setUniqueActiveUsers(uniqueUsersSet);\n    setState(prevState => ({\n      ...prevState,\n      activeUsers\n    }));\n  };\n  const [showImagePopup, setShowImagePopup] = useState(true);\n  const popupImageUrl = \"./assets/images/anychat.png\";\n  useEffect(() => {\n    const newDrone = new window.Scaledrone(\"wiCb9iY1E4xejxZe\", {\n      data: state.member\n    });\n    setDrone(newDrone);\n    const room = newDrone.subscribe(\"observable-room\");\n    newDrone.on(\"open\", error => {\n      if (error) {\n        return console.error(error);\n      }\n      const member = {\n        ...state.member,\n        avatar: randomAvatar()\n      };\n      member.id = newDrone.clientId;\n      setState(prevState => ({\n        ...prevState,\n        member\n      }));\n    });\n    room.on(\"data\", (data, member) => {\n      setState(prevState => {\n        const newMessages = [...prevState.messages, {\n          member,\n          text: data\n        }];\n        return {\n          ...prevState,\n          messages: newMessages\n        };\n      });\n    });\n    room.on(\"members\", members => {\n      updateActiveUsers(members);\n    });\n    const timer = setTimeout(() => {\n      setShowImagePopup(false);\n    }, 3000);\n    return () => {\n      room.unsubscribe();\n      newDrone.close();\n      clearTimeout(timer);\n    };\n  }, []);\n  const onSendMessage = message => {\n    drone.publish({\n      room: \"observable-room\",\n      message\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: \"lg\",\n    style: {\n      backgroundColor: \"#2c2c2c\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-container\",\n        children: /*#__PURE__*/_jsxDEV(Messages, {\n          messages: state.messages,\n          currentMember: state.member\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        onSendMessage: onSendMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ActiveUsers, {\n        activeUsers: Array.from(uniqueActiveUsers).map(username => state.activeUsers.find(user => user.username === username)),\n        updateActiveUsers: updateActiveUsers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }, this), showImagePopup && /*#__PURE__*/_jsxDEV(PopUp, {\n        imageUrl: popupImageUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 2\n  }, this);\n}\n_s(App, \"2HolDSY9CTrGSu8pn279t4sb6es=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Messages","Input","Navigation","Footer","PopUp","ActiveUsers","randomName","randomAvatar","Container","jsxDEV","_jsxDEV","App","_s","initialState","messageList","currentUser","username","avatar","activeUsers","state","setState","drone","setDrone","uniqueActiveUsers","setUniqueActiveUsers","Set","updateActiveUsers","members","map","member","clientData","uniqueUsersSet","user","prevState","showImagePopup","setShowImagePopup","popupImageUrl","newDrone","window","Scaledrone","data","room","subscribe","on","error","console","id","clientId","newMessages","messages","text","timer","setTimeout","unsubscribe","close","clearTimeout","onSendMessage","message","publish","fluid","style","backgroundColor","children","className","fileName","_jsxFileName","lineNumber","columnNumber","currentMember","Array","from","find","imageUrl","_c","$RefreshReg$"],"sources":["/Users/mymac/Desktop/Zavrsni_rad_Karla_Lenard/react_chat_app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\n\nimport Messages from \"./components/Messages\";\nimport Input from \"./components/Input\";\nimport Navigation from \"./components/Navigation\";\nimport Footer from \"./components/Footer\";\nimport PopUp from \"./components/PopUp\";\n\nimport ActiveUsers from \"./components/Users/ActiveUsers\";\nimport randomName from \"./components/Users/RandomName\";\nimport randomAvatar from \"./components/Users/RandomAvatar\";\n\nimport Container from \"react-bootstrap/Container\";\n\nfunction App() {\n\nconst initialState = {\n\tmessageList: [], // Renamed 'messages' to 'messageList'\n    currentUser: { // Renamed 'member' to 'currentUser'\n      username: randomName(),\n      avatar: randomAvatar(),\n    },\n    activeUsers: [], // No changes needed\n};\n\nconst [state, setState] = useState(initialState);\nconst [drone, setDrone] = useState(null);\n\nconst [uniqueActiveUsers, setUniqueActiveUsers] = useState(new Set());\n\nconst updateActiveUsers = (members) => {\n\tconst activeUsers = members.map((member) => ({\n\tusername: member.clientData.username,\n\tavatar: member.clientData.avatar,\n\t}));\n\n\tconst uniqueUsersSet = new Set(activeUsers.map((user) => user.username));\n\tsetUniqueActiveUsers(uniqueUsersSet);\n\n\tsetState((prevState) => ({ ...prevState, activeUsers }));\n};\n\nconst [showImagePopup, setShowImagePopup] = useState(true);\n\nconst popupImageUrl = \"./assets/images/anychat.png\";\n\nuseEffect(() => {\n\tconst newDrone = new window.Scaledrone(\"wiCb9iY1E4xejxZe\", {\n\tdata: state.member,\n\t});\n\n\tsetDrone(newDrone);\n\tconst room = newDrone.subscribe(\"observable-room\");\n\n\tnewDrone.on(\"open\", (error) => {\n\tif (error) {\n\t\treturn console.error(error);\n\t}\n\tconst member = { ...state.member, avatar: randomAvatar() };\n\tmember.id = newDrone.clientId;\n\tsetState((prevState) => ({ ...prevState, member }));\n\t});\n\n\troom.on(\"data\", (data, member) => {\n\tsetState((prevState) => {\n\t\tconst newMessages = [...prevState.messages, { member, text: data }];\n\t\treturn { ...prevState, messages: newMessages };\n\t});\n\t});\n\n\troom.on(\"members\", (members) => {\n\tupdateActiveUsers(members);\n\t});\n\n\tconst timer = setTimeout(() => {\n\tsetShowImagePopup(false);\n\t}, 3000);\n\n\treturn () => {\n\troom.unsubscribe();\n\tnewDrone.close();\n\tclearTimeout(timer);\n\t};\n}, []);\n\nconst onSendMessage = (message) => {\n\tdrone.publish({\n\troom: \"observable-room\",\n\tmessage,\n\t});\n};\n\nreturn (\n\t<Container fluid=\"lg\" style={{ backgroundColor: \"#2c2c2c\" }}>\n\t\t\t<div className=\"App\">\n\t\t\t\t<Navigation />\n\t\t\t\t\t<div className=\"messages-container\">\n\t\t\t\t\t\t<Messages messages={state.messages} currentMember={state.member} />\n\t\t\t\t\t</div>\n\t\t\t\t<Input onSendMessage={onSendMessage} />\n\t\t\t\t<ActiveUsers\n\t\t\t\t\tactiveUsers={Array.from(uniqueActiveUsers).map((username) =>\n\t\t\t\t\t\tstate.activeUsers.find((user) => user.username === username)\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tupdateActiveUsers={updateActiveUsers}\n\t\t\t\t/>\n\t\t\t\t{showImagePopup && <PopUp imageUrl={popupImageUrl} />}\n\t\t\t</div>\n\t\t<Footer />\n\t</Container>\n);\n} \n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}