{"ast":null,"code":"var _jsxFileName = \"/Users/mymac/Desktop/Zavrsni_rad_Karla_Lenard/react_chat_app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Messages from \"./components/Messages\";\nimport Input from \"./components/Input\";\nimport Navigation from \"./components/Navigation\";\nimport Footer from \"./components/Footer\";\nimport PopUp from \"./components/PopUp\";\nimport ActiveUsers from \"./ActiveUsers\"; // Import ActiveUsers component from the new file\n\nimport Container from \"react-bootstrap/Container\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const randomName = () => {\n    const colors = [\"red\", \"blue\", \"green\", \"black\", \"orange\", \"pink\", \"purple\", \"cyan\", \"yellow\"];\n    const animals = [\"Panther\", \"Panda\", \"Lion\", \"Doggo\", \"Kitty\", \"Bird\", \"Piggy\", \"Salmon\", \"Giraffe\"];\n    const color = colors[Math.floor(Math.random() * colors.length)];\n    const animal = animals[Math.floor(Math.random() * animals.length)];\n    return color + animal;\n  };\n  const randomAvatar = () => {\n    const avatars = [\"/assets/images/SCR-20230724-mist.png\", \"/assets/images/SCR-20230724-mivs.png\", \"/assets/images/SCR-20230724-miwx.png\", \"/assets/images/SCR-20230724-mixz.png\", \"/assets/images/SCR-20230724-mizm.png\", \"/assets/images/SCR-20230724-mjaz.png\"];\n    const avatar = avatars[Math.floor(Math.random() * avatars.length)];\n    return avatar;\n  };\n  const initialState = {\n    messages: [],\n    member: {\n      username: randomName(),\n      avatar: randomAvatar()\n    },\n    activeUsers: [] // Array to store active users\n  };\n\n  const [state, setState] = useState(initialState);\n  const [drone, setDrone] = useState(null);\n  const [uniqueActiveUsers, setUniqueActiveUsers] = useState(new Set());\n  const updateActiveUsers = members => {\n    const activeUsers = members.map(member => ({\n      username: member.clientData.username,\n      avatar: member.clientData.avatar\n    }));\n    const uniqueUsersSet = new Set(activeUsers.map(user => user.username));\n    setUniqueActiveUsers(uniqueUsersSet);\n    setState(prevState => ({\n      ...prevState,\n      activeUsers\n    }));\n  };\n  const [showImagePopup, setShowImagePopup] = useState(true);\n  const popupImageUrl = \"./assets/images/anychat.png\";\n  useEffect(() => {\n    const newDrone = new window.Scaledrone(\"wiCb9iY1E4xejxZe\", {\n      data: state.member\n    });\n    setDrone(newDrone);\n    const room = newDrone.subscribe(\"observable-room\");\n    newDrone.on(\"open\", error => {\n      if (error) {\n        return console.error(error);\n      }\n      const member = {\n        ...state.member,\n        avatar: randomAvatar()\n      };\n      member.id = newDrone.clientId;\n      setState(prevState => ({\n        ...prevState,\n        member\n      }));\n    });\n    room.on(\"data\", (data, member) => {\n      setState(prevState => {\n        const newMessages = [...prevState.messages, {\n          member,\n          text: data\n        }];\n        return {\n          ...prevState,\n          messages: newMessages\n        };\n      });\n    });\n    room.on(\"members\", members => {\n      updateActiveUsers(members);\n    });\n    const timer = setTimeout(() => {\n      setShowImagePopup(false);\n    }, 3000);\n    return () => {\n      room.unsubscribe();\n      newDrone.close();\n      clearTimeout(timer);\n    };\n  }, []);\n  const onSendMessage = message => {\n    drone.publish({\n      room: \"observable-room\",\n      message\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: \"lg\",\n    style: {\n      backgroundColor: \"#2c2c2c\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-container\",\n        children: /*#__PURE__*/_jsxDEV(Messages, {\n          messages: state.messages,\n          currentMember: state.member\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 3\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        onSendMessage: onSendMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(ActiveUsers, {\n        activeUsers: Array.from(uniqueActiveUsers).map(username => state.activeUsers.find(user => user.username === username)),\n        updateActiveUsers: updateActiveUsers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 4\n      }, this), showImagePopup && /*#__PURE__*/_jsxDEV(PopUp, {\n        imageUrl: popupImageUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 2\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 2\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 2\n  }, this);\n}\n_s(App, \"2HolDSY9CTrGSu8pn279t4sb6es=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Messages","Input","Navigation","Footer","PopUp","ActiveUsers","Container","jsxDEV","_jsxDEV","App","_s","randomName","colors","animals","color","Math","floor","random","length","animal","randomAvatar","avatars","avatar","initialState","messages","member","username","activeUsers","state","setState","drone","setDrone","uniqueActiveUsers","setUniqueActiveUsers","Set","updateActiveUsers","members","map","clientData","uniqueUsersSet","user","prevState","showImagePopup","setShowImagePopup","popupImageUrl","newDrone","window","Scaledrone","data","room","subscribe","on","error","console","id","clientId","newMessages","text","timer","setTimeout","unsubscribe","close","clearTimeout","onSendMessage","message","publish","fluid","style","backgroundColor","children","className","fileName","_jsxFileName","lineNumber","columnNumber","currentMember","Array","from","find","imageUrl","_c","$RefreshReg$"],"sources":["/Users/mymac/Desktop/Zavrsni_rad_Karla_Lenard/react_chat_app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\n\nimport Messages from \"./components/Messages\";\nimport Input from \"./components/Input\";\nimport Navigation from \"./components/Navigation\";\nimport Footer from \"./components/Footer\";\n\nimport PopUp from \"./components/PopUp\";\nimport ActiveUsers from \"./ActiveUsers\"; // Import ActiveUsers component from the new file\n\nimport Container from \"react-bootstrap/Container\";\n\n\nfunction App() {\n\nconst randomName = () => {\n\tconst colors = [\n\t\"red\",\n\t\"blue\",\n\t\"green\",\n\t\"black\",\n\t\"orange\",\n\t\"pink\",\n\t\"purple\",\n\t\"cyan\",\n\t\"yellow\",\n\t];\n\tconst animals = [\n\t\"Panther\",\n\t\"Panda\",\n\t\"Lion\",\n\t\"Doggo\",\n\t\"Kitty\",\n\t\"Bird\",\n\t\"Piggy\",\n\t\"Salmon\",\n\t\"Giraffe\",\n\t];\n\tconst color = colors[Math.floor(Math.random() * colors.length)];\n\tconst animal = animals[Math.floor(Math.random() * animals.length)];\n\treturn color + animal;\n};\n\nconst randomAvatar = () => {\n\tconst avatars = [\n\t\"/assets/images/SCR-20230724-mist.png\",\n\t\"/assets/images/SCR-20230724-mivs.png\",\n\t\"/assets/images/SCR-20230724-miwx.png\",\n\t\"/assets/images/SCR-20230724-mixz.png\",\n\t\"/assets/images/SCR-20230724-mizm.png\",\n\t\"/assets/images/SCR-20230724-mjaz.png\",\n\t];\n\tconst avatar = avatars[Math.floor(Math.random() * avatars.length)];\n\treturn avatar;\n};\n\nconst initialState = {\n\tmessages: [],\n\tmember: {\n\tusername: randomName(),\n\tavatar: randomAvatar(),\n\t},\n\tactiveUsers: [], // Array to store active users\n};\n\nconst [state, setState] = useState(initialState);\nconst [drone, setDrone] = useState(null);\n\nconst [uniqueActiveUsers, setUniqueActiveUsers] = useState(new Set());\n\nconst updateActiveUsers = (members) => {\n\tconst activeUsers = members.map((member) => ({\n\tusername: member.clientData.username,\n\tavatar: member.clientData.avatar,\n\t}));\n\n\tconst uniqueUsersSet = new Set(activeUsers.map((user) => user.username));\n\tsetUniqueActiveUsers(uniqueUsersSet);\n\n\tsetState((prevState) => ({ ...prevState, activeUsers }));\n};\n\n\nconst [showImagePopup, setShowImagePopup] = useState(true);\n\nconst popupImageUrl = \"./assets/images/anychat.png\";\n\nuseEffect(() => {\n\tconst newDrone = new window.Scaledrone(\"wiCb9iY1E4xejxZe\", {\n\tdata: state.member,\n\t});\n\n\tsetDrone(newDrone);\n\n\tconst room = newDrone.subscribe(\"observable-room\");\n\n\tnewDrone.on(\"open\", (error) => {\n\tif (error) {\n\t\treturn console.error(error);\n\t}\n\tconst member = { ...state.member, avatar: randomAvatar() };\n\tmember.id = newDrone.clientId;\n\tsetState((prevState) => ({ ...prevState, member }));\n\t});\n\n\troom.on(\"data\", (data, member) => {\n\tsetState((prevState) => {\n\t\tconst newMessages = [...prevState.messages, { member, text: data }];\n\t\treturn { ...prevState, messages: newMessages };\n\t});\n\t});\n\n\troom.on(\"members\", (members) => {\n\tupdateActiveUsers(members); \n\t});\n\n\tconst timer = setTimeout(() => {\n\tsetShowImagePopup(false);\n\t}, 3000);\n\t\n\treturn () => {\n\troom.unsubscribe();\n\tnewDrone.close();\n\tclearTimeout(timer)\n\t};\n}, []);\n\nconst onSendMessage = (message) => {\n\tdrone.publish({\n\troom: \"observable-room\",\n\tmessage,\n\t});\n};\n\nreturn (\n\t<Container fluid=\"lg\" style={{ backgroundColor: \"#2c2c2c\" }}>\n\t<div className=\"App\">\n\t  <Navigation />\n\t  <div className=\"messages-container\">\n\t\t<Messages messages={state.messages} currentMember={state.member} />\n\t  </div>\n\t  <Input onSendMessage={onSendMessage} />\n\t  {/* Pass activeUsers and updateActiveUsers as props to ActiveUsers component */}\n\t  <ActiveUsers\n\t\tactiveUsers={Array.from(uniqueActiveUsers).map((username) =>\n\t\t  state.activeUsers.find((user) => user.username === username)\n\t\t)}\n\t\tupdateActiveUsers={updateActiveUsers}\n\t  />\n\t  {showImagePopup && <PopUp imageUrl={popupImageUrl} />}\n\t</div>\n\t<Footer />\n  </Container>\n);\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAO,WAAW;AAElB,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,KAAK,MAAM,oBAAoB;AACtC,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,MAAM,MAAM,qBAAqB;AAExC,OAAOC,KAAK,MAAM,oBAAoB;AACtC,OAAOC,WAAW,MAAM,eAAe,CAAC,CAAC;;AAEzC,OAAOC,SAAS,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGlD,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAEf,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACxB,MAAMC,MAAM,GAAG,CACf,KAAK,EACL,MAAM,EACN,OAAO,EACP,OAAO,EACP,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,MAAM,EACN,QAAQ,CACP;IACD,MAAMC,OAAO,GAAG,CAChB,SAAS,EACT,OAAO,EACP,MAAM,EACN,OAAO,EACP,OAAO,EACP,MAAM,EACN,OAAO,EACP,QAAQ,EACR,SAAS,CACR;IACD,MAAMC,KAAK,GAAGF,MAAM,CAACG,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGL,MAAM,CAACM,MAAM,CAAC,CAAC;IAC/D,MAAMC,MAAM,GAAGN,OAAO,CAACE,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGJ,OAAO,CAACK,MAAM,CAAC,CAAC;IAClE,OAAOJ,KAAK,GAAGK,MAAM;EACtB,CAAC;EAED,MAAMC,YAAY,GAAGA,CAAA,KAAM;IAC1B,MAAMC,OAAO,GAAG,CAChB,sCAAsC,EACtC,sCAAsC,EACtC,sCAAsC,EACtC,sCAAsC,EACtC,sCAAsC,EACtC,sCAAsC,CACrC;IACD,MAAMC,MAAM,GAAGD,OAAO,CAACN,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGI,OAAO,CAACH,MAAM,CAAC,CAAC;IAClE,OAAOI,MAAM;EACd,CAAC;EAED,MAAMC,YAAY,GAAG;IACpBC,QAAQ,EAAE,EAAE;IACZC,MAAM,EAAE;MACRC,QAAQ,EAAEf,UAAU,CAAC,CAAC;MACtBW,MAAM,EAAEF,YAAY,CAAC;IACrB,CAAC;IACDO,WAAW,EAAE,EAAE,CAAE;EAClB,CAAC;;EAED,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG/B,QAAQ,CAACyB,YAAY,CAAC;EAChD,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAM,CAACkC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGnC,QAAQ,CAAC,IAAIoC,GAAG,CAAC,CAAC,CAAC;EAErE,MAAMC,iBAAiB,GAAIC,OAAO,IAAK;IACtC,MAAMT,WAAW,GAAGS,OAAO,CAACC,GAAG,CAAEZ,MAAM,KAAM;MAC7CC,QAAQ,EAAED,MAAM,CAACa,UAAU,CAACZ,QAAQ;MACpCJ,MAAM,EAAEG,MAAM,CAACa,UAAU,CAAChB;IAC1B,CAAC,CAAC,CAAC;IAEH,MAAMiB,cAAc,GAAG,IAAIL,GAAG,CAACP,WAAW,CAACU,GAAG,CAAEG,IAAI,IAAKA,IAAI,CAACd,QAAQ,CAAC,CAAC;IACxEO,oBAAoB,CAACM,cAAc,CAAC;IAEpCV,QAAQ,CAAEY,SAAS,KAAM;MAAE,GAAGA,SAAS;MAAEd;IAAY,CAAC,CAAC,CAAC;EACzD,CAAC;EAGD,MAAM,CAACe,cAAc,EAAEC,iBAAiB,CAAC,GAAG7C,QAAQ,CAAC,IAAI,CAAC;EAE1D,MAAM8C,aAAa,GAAG,6BAA6B;EAEnD7C,SAAS,CAAC,MAAM;IACf,MAAM8C,QAAQ,GAAG,IAAIC,MAAM,CAACC,UAAU,CAAC,kBAAkB,EAAE;MAC3DC,IAAI,EAAEpB,KAAK,CAACH;IACZ,CAAC,CAAC;IAEFM,QAAQ,CAACc,QAAQ,CAAC;IAElB,MAAMI,IAAI,GAAGJ,QAAQ,CAACK,SAAS,CAAC,iBAAiB,CAAC;IAElDL,QAAQ,CAACM,EAAE,CAAC,MAAM,EAAGC,KAAK,IAAK;MAC/B,IAAIA,KAAK,EAAE;QACV,OAAOC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MAC5B;MACA,MAAM3B,MAAM,GAAG;QAAE,GAAGG,KAAK,CAACH,MAAM;QAAEH,MAAM,EAAEF,YAAY,CAAC;MAAE,CAAC;MAC1DK,MAAM,CAAC6B,EAAE,GAAGT,QAAQ,CAACU,QAAQ;MAC7B1B,QAAQ,CAAEY,SAAS,KAAM;QAAE,GAAGA,SAAS;QAAEhB;MAAO,CAAC,CAAC,CAAC;IACnD,CAAC,CAAC;IAEFwB,IAAI,CAACE,EAAE,CAAC,MAAM,EAAE,CAACH,IAAI,EAAEvB,MAAM,KAAK;MAClCI,QAAQ,CAAEY,SAAS,IAAK;QACvB,MAAMe,WAAW,GAAG,CAAC,GAAGf,SAAS,CAACjB,QAAQ,EAAE;UAAEC,MAAM;UAAEgC,IAAI,EAAET;QAAK,CAAC,CAAC;QACnE,OAAO;UAAE,GAAGP,SAAS;UAAEjB,QAAQ,EAAEgC;QAAY,CAAC;MAC/C,CAAC,CAAC;IACF,CAAC,CAAC;IAEFP,IAAI,CAACE,EAAE,CAAC,SAAS,EAAGf,OAAO,IAAK;MAChCD,iBAAiB,CAACC,OAAO,CAAC;IAC1B,CAAC,CAAC;IAEF,MAAMsB,KAAK,GAAGC,UAAU,CAAC,MAAM;MAC/BhB,iBAAiB,CAAC,KAAK,CAAC;IACxB,CAAC,EAAE,IAAI,CAAC;IAER,OAAO,MAAM;MACbM,IAAI,CAACW,WAAW,CAAC,CAAC;MAClBf,QAAQ,CAACgB,KAAK,CAAC,CAAC;MAChBC,YAAY,CAACJ,KAAK,CAAC;IACnB,CAAC;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMK,aAAa,GAAIC,OAAO,IAAK;IAClClC,KAAK,CAACmC,OAAO,CAAC;MACdhB,IAAI,EAAE,iBAAiB;MACvBe;IACA,CAAC,CAAC;EACH,CAAC;EAED,oBACCxD,OAAA,CAACF,SAAS;IAAC4D,KAAK,EAAC,IAAI;IAACC,KAAK,EAAE;MAAEC,eAAe,EAAE;IAAU,CAAE;IAAAC,QAAA,gBAC5D7D,OAAA;MAAK8D,SAAS,EAAC,KAAK;MAAAD,QAAA,gBAClB7D,OAAA,CAACN,UAAU;QAAAqE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACdlE,OAAA;QAAK8D,SAAS,EAAC,oBAAoB;QAAAD,QAAA,eACpC7D,OAAA,CAACR,QAAQ;UAACwB,QAAQ,EAAEI,KAAK,CAACJ,QAAS;UAACmD,aAAa,EAAE/C,KAAK,CAACH;QAAO;UAAA8C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7D,CAAC,eACNlE,OAAA,CAACP,KAAK;QAAC8D,aAAa,EAAEA;MAAc;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAEvClE,OAAA,CAACH,WAAW;QACbsB,WAAW,EAAEiD,KAAK,CAACC,IAAI,CAAC7C,iBAAiB,CAAC,CAACK,GAAG,CAAEX,QAAQ,IACtDE,KAAK,CAACD,WAAW,CAACmD,IAAI,CAAEtC,IAAI,IAAKA,IAAI,CAACd,QAAQ,KAAKA,QAAQ,CAC7D,CAAE;QACFS,iBAAiB,EAAEA;MAAkB;QAAAoC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnC,CAAC,EACDhC,cAAc,iBAAIlC,OAAA,CAACJ,KAAK;QAAC2E,QAAQ,EAAEnC;MAAc;QAAA2B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClD,CAAC,eACNlE,OAAA,CAACL,MAAM;MAAAoE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEd;AAAChE,EAAA,CA7IQD,GAAG;AAAAuE,EAAA,GAAHvE,GAAG;AA+IZ,eAAeA,GAAG;AAAC,IAAAuE,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}