{"ast":null,"code":"var _jsxFileName = \"/Users/mymac/Desktop/Zavrsni_rad_Karla_Lenard/react_chat_app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Messages from \"./components/Messages\";\nimport Input from \"./components/Input\";\nimport Navigation from \"./components/Navigation\";\nimport Footer from \"./components/Footer\";\nimport PopUp from \"./components/PopUp\";\nimport ActiveUsers from \"./components/Users/ActiveUsers\";\nimport randomName from \"./components/Users/RandomName\";\nimport randomAvatar from \"./components/Users/RandomAvatar\";\nimport Container from \"react-bootstrap/Container\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const initialState = {\n    text: [],\n    member: {\n      username: randomName(),\n      avatar: randomAvatar()\n    },\n    activeUsers: []\n  };\n  const [state, setState] = useState(initialState);\n  const [drone, setDrone] = useState(null);\n  const [uniqueActiveUsers, setUniqueActiveUsers] = useState(new Set());\n  const updateActiveUsers = members => {\n    const activeUsers = members.map(member => ({\n      username: member.clientData.username,\n      avatar: member.clientData.avatar\n    }));\n    const uniqueUsersSet = new Set(activeUsers.map(user => user.username));\n    setUniqueActiveUsers(uniqueUsersSet);\n    setState(prevState => ({\n      ...prevState,\n      activeUsers\n    }));\n  };\n  const [showImagePopup, setShowImagePopup] = useState(true);\n  const popupImageUrl = \"./assets/images/anychat.png\";\n  useEffect(() => {\n    const newDrone = new window.Scaledrone(\"wiCb9iY1E4xejxZe\", {\n      data: state.member\n    });\n    setDrone(newDrone);\n    const room = newDrone.subscribe(\"observable-room\");\n    newDrone.on(\"open\", error => {\n      if (error) {\n        return console.error(error);\n      }\n      const member = {\n        ...state.member,\n        avatar: randomAvatar()\n      };\n      member.id = newDrone.clientId;\n      setState(prevState => ({\n        ...prevState,\n        member\n      }));\n    });\n    room.on(\"data\", (data, member) => {\n      setState(prevState => {\n        const newMessages = [...prevState.text, {\n          member,\n          text: data\n        }];\n        return {\n          ...prevState,\n          text: newMessages\n        };\n      });\n    });\n    room.on(\"members\", members => {\n      updateActiveUsers(members);\n    });\n    const timer = setTimeout(() => {\n      setShowImagePopup(false);\n    }, 3000);\n    return () => {\n      room.unsubscribe();\n      newDrone.close();\n      clearTimeout(timer);\n    };\n  }, []);\n  const onSendMessage = message => {\n    drone.publish({\n      room: \"observable-room\",\n      message\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: \"lg\",\n    style: {\n      backgroundColor: \"#2c2c2c\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-container\",\n        children: /*#__PURE__*/_jsxDEV(Messages, {\n          text: state.text,\n          currentUser: state.member\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        onSendMessage: onSendMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ActiveUsers, {\n        activeUsers: Array.from(uniqueActiveUsers).map(username => state.activeUsers.find(user => user.username === username)),\n        updateActiveUsers: updateActiveUsers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 5\n      }, this), showImagePopup && /*#__PURE__*/_jsxDEV(PopUp, {\n        imageUrl: popupImageUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 2\n  }, this);\n}\n_s(App, \"2HolDSY9CTrGSu8pn279t4sb6es=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Messages","Input","Navigation","Footer","PopUp","ActiveUsers","randomName","randomAvatar","Container","jsxDEV","_jsxDEV","App","_s","initialState","text","member","username","avatar","activeUsers","state","setState","drone","setDrone","uniqueActiveUsers","setUniqueActiveUsers","Set","updateActiveUsers","members","map","clientData","uniqueUsersSet","user","prevState","showImagePopup","setShowImagePopup","popupImageUrl","newDrone","window","Scaledrone","data","room","subscribe","on","error","console","id","clientId","newMessages","timer","setTimeout","unsubscribe","close","clearTimeout","onSendMessage","message","publish","fluid","style","backgroundColor","children","className","fileName","_jsxFileName","lineNumber","columnNumber","currentUser","Array","from","find","imageUrl","_c","$RefreshReg$"],"sources":["/Users/mymac/Desktop/Zavrsni_rad_Karla_Lenard/react_chat_app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\n\nimport Messages from \"./components/Messages\";\nimport Input from \"./components/Input\";\nimport Navigation from \"./components/Navigation\";\nimport Footer from \"./components/Footer\";\nimport PopUp from \"./components/PopUp\";\nimport ActiveUsers from \"./components/Users/ActiveUsers\";\nimport randomName from \"./components/Users/RandomName\";\nimport randomAvatar from \"./components/Users/RandomAvatar\";\n\nimport Container from \"react-bootstrap/Container\";\n\nfunction App() {\n\nconst initialState = {\n\ttext: [],\n\tmember: {\n\tusername: randomName(),\n\tavatar: randomAvatar(),\n\t},\n\tactiveUsers: [],\n};\n\nconst [state, setState] = useState(initialState);\nconst [drone, setDrone] = useState(null);\n\nconst [uniqueActiveUsers, setUniqueActiveUsers] = useState(new Set());\n\nconst updateActiveUsers = (members) => {\n\tconst activeUsers = members.map((member) => ({\n\tusername: member.clientData.username,\n\tavatar: member.clientData.avatar,\n\t}));\n\n\tconst uniqueUsersSet = new Set(activeUsers.map((user) => user.username));\n\tsetUniqueActiveUsers(uniqueUsersSet);\n\n\tsetState((prevState) => ({ ...prevState, activeUsers }));\n};\n\nconst [showImagePopup, setShowImagePopup] = useState(true);\n\nconst popupImageUrl = \"./assets/images/anychat.png\";\n\nuseEffect(() => {\n\tconst newDrone = new window.Scaledrone(\"wiCb9iY1E4xejxZe\", {\n\tdata: state.member,\n\t});\n\n\tsetDrone(newDrone);\n\tconst room = newDrone.subscribe(\"observable-room\");\n\n\tnewDrone.on(\"open\", (error) => {\n\tif (error) {\n\t\treturn console.error(error);\n\t}\n\tconst member = { ...state.member, avatar: randomAvatar() };\n\tmember.id = newDrone.clientId;\n\tsetState((prevState) => ({ ...prevState, member }));\n\t});\n\n\troom.on(\"data\", (data, member) => {\n\tsetState((prevState) => {\n\t\tconst newMessages = [...prevState.text, { member, text: data }];\n\t\treturn { ...prevState, text: newMessages };\n\t});\n\t});\n\n\troom.on(\"members\", (members) => {\n\tupdateActiveUsers(members);\n\t});\n\n\tconst timer = setTimeout(() => {\n\tsetShowImagePopup(false);\n\t}, 3000);\n\n\treturn () => {\n\troom.unsubscribe();\n\tnewDrone.close();\n\tclearTimeout(timer);\n\t};\n}, []);\n\nconst onSendMessage = (message) => {\n\tdrone.publish({\n\troom: \"observable-room\",\n\tmessage,\n\t});\n};\n\nreturn (\n\t<Container fluid=\"lg\" style={{ backgroundColor: \"#2c2c2c\" }}>\n\t\t\t<div className=\"App\">\n\t\t\t\t<Navigation />\n\t\t\t\t\t<div className=\"text-container\">\n\t\t\t\t\t\t<Messages text={state.text} currentUser={state.member} />\n\t\t\t\t\t</div>\n\t\t\t\t<Input onSendMessage={onSendMessage} />\n\t\t\t\t<ActiveUsers\n\t\t\t\t\tactiveUsers={Array.from(uniqueActiveUsers).map((username) =>\n\t\t\t\t\t\tstate.activeUsers.find((user) => user.username === username)\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tupdateActiveUsers={updateActiveUsers}\n\t\t\t\t/>\n\t\t\t\t{showImagePopup && <PopUp imageUrl={popupImageUrl} />}\n\t\t\t</div>\n\t\t<Footer />\n\t</Container>\n);\n} \n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}